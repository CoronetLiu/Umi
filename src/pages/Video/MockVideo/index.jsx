import { Modal, Table, message } from 'antd';
import { Player, BigPlayButton, LoadingSpinner } from 'video-react';
import React, { useState, useEffect, useRef } from 'react';
import styles from './index.less';
import { getData } from '../service';
import defaultEmptyImg from '@/assets/default/defaultEmptyImg.png';
import smallVideo from '@/assets/video/small.mp4';

let globalTimer = {};

const MockVideo = (props) => {
  const { visible, setVisible, cSite } = props;
  const [dataSource, setDataSource] = useState([]);
  const [headPicSrc, setHeadPicSrc] = useState('');
  const [platePicSrc, setPlatePicSrc] = useState('');

  const columns = [
    {
      title: '检测时间',
      dataIndex: 'detectionTime',
      align: 'left',
      ellipsis: true,
      width: '15%',
    },
    {
      title: '车牌号',
      dataIndex: 'vehPlate',
      align: 'left',
      width: '10%',
    },
    {
      title: '轴数',
      dataIndex: 'axleNum',
      align: 'left',
      width: '8%',
    },
    {
      title: '限重(kg)',
      dataIndex: 'limitWeight',
      align: 'left',
      width: '12%',
    },
    {
      title: '车货总重(kg)',
      dataIndex: 'totalWeight',
      align: 'left',
      width: '12%',
    },
    {
      title: '超限重量(kg)',
      dataIndex: 'wholeOver',
      align: 'left',
      width: '12%',
    },
    {
      title: '是否超限',
      dataIndex: 'overLimitFlag',
      key: 'overLimitFlag',
      width: '10%',
      render(_, record, index) {
        return _ == '1' ? <span style={{ color: '#F2627B' }}>是</span> : <span>否</span>;
      },
    },
    {
      title: '超限率',
      dataIndex: 'overRate',
      width: '8%',
      align: 'left',
      render(_, record) {
        return <span style={{ color: _ ? '#D84557' : '#fff' }}>{_}%</span>;
      },
    },
  ];

  useEffect(() => {
    if (visible) {
      getMockData();
    }
    return () => {
      for (let i in globalTimer) {
        clearTimeout(globalTimer[i]);
      }
    };
  }, [visible]);

  // 请求数据
  const getMockData = async () => {
    let res = await getData({
      siteCode: cSite.siteCode,
    });
    if (res?.code == 1) {
      let result = [
        [
          '',
          '',
          '',
          '',
          '',
          '2017-04-07 14:17:38',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '',
        ],
        [
          '3713242017040741744071859',
          '371324',
          '2',
          '浙GUN102',
          '蓝',
          '2017-04-07 14:17:41',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '56',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1480',
          '890',
          '590',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2580',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141744071859.jpg',
        ],
        [
          '3713242017040741744071860',
          '371324',
          '2',
          '浙GF597F',
          '蓝',
          '2017-04-07 14:17:43',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '59',
          '0.00',
          '',
          '46',
          '18',
          '20',
          '1740',
          '960',
          '780',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2620',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141744071860.jpg',
        ],
        [
          '3713242017040741744071861',
          '371324',
          '1',
          '浙GL1185',
          '蓝',
          '2017-04-07 14:17:43',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '54',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '1680',
          '960',
          '720',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2770',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141744071861.jpg',
        ],
        [
          '3713242017040741744071862',
          '371324',
          '2',
          '浙G6419B',
          '蓝',
          '2017-04-07 14:17:44',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '56',
          '0.00',
          '',
          '42',
          '18',
          '20',
          '930',
          '450',
          '480',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2280',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141744071862.jpg',
        ],
        [
          '3713242017040741744071863',
          '371324',
          '2',
          '浙GF132J',
          '蓝',
          '2017-04-07 14:17:48',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '59',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1380',
          '760',
          '620',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2590',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141744071863.jpg',
        ],
        [
          '3713242017040741754071864',
          '371324',
          '2',
          '浙GUP133',
          '蓝',
          '2017-04-07 14:17:57',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '56',
          '0.00',
          '',
          '49',
          '18',
          '20',
          '1640',
          '810',
          '830',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2970',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141754071864.jpg',
        ],
        [
          '3713242017040741804071865',
          '371324',
          '2',
          '浙G693JN',
          '蓝',
          '2017-04-07 14:18:00',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '56',
          '0.00',
          '',
          '44',
          '18',
          '20',
          '820',
          '410',
          '410',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2410',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141804071865.jpg',
        ],
        [
          '3713242017040741804071866',
          '371324',
          '2',
          '浙G6R113',
          '蓝',
          '2017-04-07 14:18:06',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '54',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '2080',
          '820',
          '1260',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2770',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141804071866.jpg',
        ],
        [
          '3713242017040741804071867',
          '371324',
          '2',
          '浙GFS992',
          '蓝',
          '2017-04-07 14:18:09',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '47',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1630',
          '940',
          '690',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2550',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141804071867.jpg',
        ],
        [
          '3713242017040741814071868',
          '371324',
          '1',
          '浙GFC039',
          '蓝',
          '2017-04-07 14:18:10',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '57',
          '0.00',
          '',
          '50',
          '18',
          '20',
          '1810',
          '960',
          '850',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '3000',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141814071868.jpg',
        ],
        [
          '3713242017040741814071869',
          '371324',
          '2',
          '浙GNN603',
          '蓝',
          '2017-04-07 14:18:10',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '49',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1290',
          '660',
          '630',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2580',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141814071869.jpg',
        ],
        [
          '3713242017040741814071870',
          '371324',
          '2',
          '浙GF921T',
          '蓝',
          '2017-04-07 14:18:15',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '60',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '1930',
          '1110',
          '820',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2750',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141814071870.jpg',
        ],
        [
          '3713242017040741824071871',
          '371324',
          '2',
          '浙GF113K',
          '蓝',
          '2017-04-07 14:18:24',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '61',
          '0.01',
          '',
          '42',
          '18',
          '20',
          '960',
          '590',
          '370',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2200',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141824071871.jpg',
        ],
        [
          '3713242017040741824071872',
          '371324',
          '2',
          '浙G37V50',
          '蓝',
          '2017-04-07 14:18:29',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '53',
          '0.00',
          '',
          '53',
          '18',
          '20',
          '3760',
          '830',
          '2930',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '3320',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141824071872.jpg',
        ],
        [
          '3713242017040741844071873',
          '371324',
          '2',
          '浙G6759T',
          '蓝',
          '2017-04-07 14:18:46',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '61',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1150',
          '570',
          '580',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2510',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141844071873.jpg',
        ],
        [
          '3713242017040741844071874',
          '371324',
          '1',
          '浙GU785J',
          '蓝',
          '2017-04-07 14:18:46',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '63',
          '0.00',
          '',
          '44',
          '18',
          '20',
          '1200',
          '690',
          '510',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2420',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141844071874.jpg',
        ],
        [
          '3713242017040741854071875',
          '371324',
          '2',
          '浙GL573Y',
          '蓝',
          '2017-04-07 14:18:53',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '48',
          '0.00',
          '',
          '44',
          '18',
          '20',
          '1540',
          '870',
          '670',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2480',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141854071875.jpg',
        ],
        [
          '3713242017040741854071876',
          '371324',
          '1',
          '浙G373UU',
          '蓝',
          '2017-04-07 14:18:58',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '69',
          '0.00',
          '',
          '44',
          '18',
          '20',
          '1090',
          '690',
          '400',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2460',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141854071876.jpg',
        ],
        [
          '3713242017040741854071877',
          '371324',
          '2',
          '浙GV2006',
          '蓝',
          '2017-04-07 14:18:59',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '76',
          '0.00',
          '',
          '48',
          '18',
          '20',
          '2200',
          '1020',
          '1180',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2890',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141854071877.jpg',
        ],
        [
          '3713242017040741904071878',
          '371324',
          '2',
          '浙GF109J',
          '蓝',
          '2017-04-07 14:19:05',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '40',
          '0.00',
          '',
          '46',
          '18',
          '20',
          '1530',
          '820',
          '710',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2630',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141904071878.jpg',
        ],
        [
          '3713242017040741904071879',
          '371324',
          '1',
          '浙GG283W',
          '蓝',
          '2017-04-07 14:19:06',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '46',
          '0.00',
          '',
          '44',
          '18',
          '20',
          '890',
          '470',
          '420',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2440',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141904071879.jpg',
        ],
        [
          '3713242017040741904071880',
          '371324',
          '1',
          '浙G716NX',
          '蓝',
          '2017-04-07 14:19:08',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '73',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '2270',
          '1270',
          '1000',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2730',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141904071880.jpg',
        ],
        [
          '3713242017040741904071881',
          '371324',
          '2',
          '浙GUC959',
          '蓝',
          '2017-04-07 14:19:09',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '52',
          '0.00',
          '',
          '49',
          '18',
          '20',
          '1260',
          '690',
          '570',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2920',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141904071881.jpg',
        ],
        [
          '3713242017040741914071882',
          '371324',
          '1',
          '浙GP982B',
          '蓝',
          '2017-04-07 14:19:10',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '60',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1350',
          '820',
          '530',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2530',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141914071882.jpg',
        ],
        [
          '3713242017040741914071883',
          '371324',
          '1',
          '浙G107YU',
          '蓝',
          '2017-04-07 14:19:13',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '60',
          '0.00',
          '',
          '52',
          '18',
          '20',
          '4560',
          '1860',
          '2700',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '3290',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141914071883.jpg',
        ],
        [
          '3713242017040741914071884',
          '371324',
          '1',
          '浙KN8020',
          '蓝',
          '2017-04-07 14:19:16',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '62',
          '0.00',
          '',
          '52',
          '18',
          '20',
          '5180',
          '2100',
          '3080',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '3270',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141914071884.jpg',
        ],
        [
          '3713242017040741924071885',
          '371324',
          '3',
          '浙G09W03',
          '蓝',
          '2017-04-07 14:19:20',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '21',
          '0.00',
          '',
          '49',
          '18',
          '20',
          '1720',
          '880',
          '840',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2960',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141924071885.jpg',
        ],
        [
          '3713242017040741924071886',
          '371324',
          '1',
          '浙GL1680',
          '黄',
          '2017-04-07 14:19:28',
          '2',
          '2',
          '0',
          '0.02',
          '0',
          '59',
          '0.00',
          '',
          '68',
          '18',
          '20',
          '8050',
          '3790',
          '4260',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '4880',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141924071886.jpg',
        ],
        [
          '3713242017040741924071887',
          '371324',
          '2',
          '浙GG5X06',
          '蓝',
          '2017-04-07 14:19:29',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '61',
          '0.00',
          '',
          '46',
          '18',
          '20',
          '1640',
          '780',
          '860',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2630',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141924071887.jpg',
        ],
        [
          '3713242017040741934071888',
          '371324',
          '2',
          '浙G935JR',
          '蓝',
          '2017-04-07 14:19:35',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '53',
          '0.00',
          '',
          '46',
          '18',
          '20',
          '1290',
          '730',
          '560',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2660',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141934071888.jpg',
        ],
        [
          '3713242017040741934071889',
          '371324',
          '1',
          '浙G159RB',
          '蓝',
          '2017-04-07 14:19:37',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '43',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '2210',
          '1280',
          '930',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2770',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141934071889.jpg',
        ],
        [
          '3713242017040741954071890',
          '371324',
          '1',
          '浙GPJ733',
          '蓝',
          '2017-04-07 14:19:59',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '50',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '2430',
          '1220',
          '1210',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2740',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407141954071890.jpg',
        ],
        [
          '3713242017040742004071891',
          '371324',
          '3',
          '皖S2K235',
          '蓝',
          '2017-04-07 14:20:00',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '28',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1450',
          '580',
          '870',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2530',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142004071891.jpg',
        ],
        [
          '3713242017040742004071892',
          '371324',
          '1',
          '浙LP966D',
          '蓝',
          '2017-04-07 14:20:01',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '56',
          '0.00',
          '',
          '48',
          '18',
          '20',
          '1700',
          '880',
          '820',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2840',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142004071892.jpg',
        ],
        [
          '3713242017040742004071893',
          '371324',
          '2',
          '浙GU922A',
          '蓝',
          '2017-04-07 14:20:02',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '42',
          '0.00',
          '',
          '46',
          '18',
          '20',
          '1280',
          '640',
          '640',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2610',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142004071893.jpg',
        ],
        [
          '3713242017040742004071894',
          '371324',
          '1',
          '浙GL8F05',
          '蓝',
          '2017-04-07 14:20:02',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '60',
          '0.00',
          '',
          '44',
          '18',
          '20',
          '1110',
          '670',
          '440',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2490',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142004071894.jpg',
        ],
        [
          '3713242017040742004071895',
          '371324',
          '1',
          '浙G21833',
          '蓝',
          '2017-04-07 14:20:06',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '57',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1280',
          '740',
          '540',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2570',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142004071895.jpg',
        ],
        [
          '3713242017040742014071896',
          '371324',
          '1',
          '浙GF129D',
          '蓝',
          '2017-04-07 14:20:14',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '55',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '1600',
          '920',
          '680',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2760',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142014071896.jpg',
        ],
        [
          '3713242017040742014071897',
          '371324',
          '2',
          '浙GUW926',
          '蓝',
          '2017-04-07 14:20:17',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '51',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1180',
          '690',
          '490',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2510',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142014071897.jpg',
        ],
        [
          '3713242017040742024071898',
          '371324',
          '2',
          '浙KG1909',
          '黄',
          '2017-04-07 14:20:20',
          '2',
          '2',
          '0',
          '0.03',
          '0',
          '51',
          '0.00',
          '',
          '52',
          '18',
          '20',
          '6680',
          '2100',
          '4580',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '3220',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142024071898.jpg',
        ],
        [
          '3713242017040742024071899',
          '371324',
          '2',
          '浙G7172L',
          '蓝',
          '2017-04-07 14:20:25',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '71',
          '0.00',
          '',
          '46',
          '18',
          '20',
          '1450',
          '860',
          '590',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2600',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142024071899.jpg',
        ],
        [
          '3713242017040742024071900',
          '371324',
          '1',
          '浙GU1265',
          '蓝',
          '2017-04-07 14:20:27',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '77',
          '0.00',
          '',
          '45',
          '18',
          '20',
          '1240',
          '710',
          '530',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2560',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142024071900.jpg',
        ],
        [
          '3713242017040742024071901',
          '371324',
          '2',
          '浙G668KX',
          '蓝',
          '2017-04-07 14:20:28',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '54',
          '0.00',
          '',
          '48',
          '18',
          '20',
          '2350',
          '1180',
          '1170',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2840',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142024071901.jpg',
        ],
        [
          '3713242017040742034071902',
          '371324',
          '1',
          '浙GUQ673',
          '蓝',
          '2017-04-07 14:20:31',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '65',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '1430',
          '820',
          '610',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2730',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142034071902.jpg',
        ],
        [
          '3713242017040742034071903',
          '371324',
          '1',
          '浙G8W530',
          '蓝',
          '2017-04-07 14:20:38',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '42',
          '0.00',
          '',
          '44',
          '18',
          '20',
          '1270',
          '760',
          '510',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2430',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142034071903.jpg',
        ],
        [
          '3713242017040742034071904',
          '371324',
          '2',
          '浙KA2245',
          '黄',
          '2017-04-07 14:20:39',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '48',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '4950',
          '1850',
          '3100',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2720',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142034071904.jpg',
        ],
        [
          '3713242017040742044071905',
          '371324',
          '1',
          '赣HK3218',
          '蓝',
          '2017-04-07 14:20:40',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '48',
          '0.00',
          '',
          '47',
          '18',
          '20',
          '1770',
          '990',
          '780',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2730',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142044071905.jpg',
        ],
        [
          '3713242017040742044071906',
          '371324',
          '2',
          '浙GU356H',
          '蓝',
          '2017-04-07 14:20:42',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '52',
          '0.00',
          '',
          '48',
          '18',
          '20',
          '2270',
          '1190',
          '1080',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2820',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142044071906.jpg',
        ],
        [
          '3713242017040742044071907',
          '371324',
          '1',
          '浙GUB382',
          '蓝',
          '2017-04-07 14:20:43',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '50',
          '0.00',
          '',
          '44',
          '18',
          '20',
          '1750',
          '570',
          '1180',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2450',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142044071907.jpg',
        ],
        [
          '3713242017040742044071908',
          '371324',
          '2',
          '浙G7131K',
          '蓝',
          '2017-04-07 14:20:49',
          '2',
          '2',
          '0',
          '0.00',
          '0',
          '56',
          '0.00',
          '',
          '44',
          '18',
          '20',
          '1010',
          '670',
          '340',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '2420',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          '0',
          'IMG/vehicle/20170407142044071908.jpg',
        ],
      ];
      const replaceAixs = (num) => {
        if (num == 2) return 18000;
        if (num == 3) return 27000;
        if (num == 4) return 36000;
        if (num == 5) return 43000;
        if (num > 5) return 49000;
      };
      res = result.map((item) => {
        return {
          id: item[0],
          busiNum: item[0],
          detectionTime: item[5],
          vehPlate: item[3],
          axleNum: item[6],
          limitWeight: replaceAixs(item[6]),
          totalWeight: item[17],
          wholeOver: item[34],
          overLimitFlag: 0,
          overRate: '0.00',
          headPicSrc: item[item.length - 1],
          platePicSrc: item[item.length - 1].replace(/vehicle/g, 'vehplate'),
        };
      });

      let s = new Date(res[0].detectionTime);
      let sTime = s.getTime();
      for (let i = 1; i < res.length; i++) {
        let e = new Date(res[i].detectionTime);
        let eTime = e.getTime();
        generateTimeout(res[i], sTime, eTime);
      }
    }
  };

  const generateTimeout = (row, sTime, eTime) => {
    ((r, s, e) => {
      globalTimer[r.id] = setTimeout(() => {
        let list = dataSource;
        list.unshift(r);
        let dataList = JSON.stringify(list);
        setDataSource(JSON.parse(dataList));
        setHeadPicSrc(r.headPicSrc);
        setPlatePicSrc(r.platePicSrc);
      }, e - s);
    })(row, sTime, eTime);
  };

  const onClose = () => {
    setVisible(false);
    setDataSource([]);
    setHeadPicSrc('');
    setPlatePicSrc('');
    for (let i in globalTimer) {
      clearTimeout(globalTimer[i]);
    }
  };

  return (
    <Modal
      title={cSite.siteName}
      visible={visible}
      mask={false}
      getContainer={false}
      wrapClassName={styles.videoModal}
      footer={null}
      width={'900px'}
      style={{
        textAlign: 'center',
        height: '630px',
        top: '60px',
        paddingBottom: '0',
      }}
      bodyStyle={{
        padding: '20px',
        background: 'transparent',
      }}
      onCancel={onClose}
      destroyOnClose={true}
    >
      <div>
        <div className={styles.rec_top}>
          <div>
            <Player
              width={'100%'}
              height={'100%'}
              videoId="video-1"
              fluid={false}
              autoPlay={true}
              src={smallVideo}
            >
              <BigPlayButton position="center"></BigPlayButton>
              <LoadingSpinner />
            </Player>
          </div>
          <div>
            {headPicSrc ? (
              <div>
                <img src={require(`@/assets/video/${headPicSrc}`)} alt="" />
              </div>
            ) : (
              <div>
                <img src={defaultEmptyImg} />
              </div>
            )}
            {platePicSrc ? (
              <div>
                <img src={require(`@/assets/video/${platePicSrc}`)} alt="" />
              </div>
            ) : (
              <div>
                <img src={defaultEmptyImg} />
              </div>
            )}
          </div>
        </div>
        <div className={styles.centerTitle}>检测数据</div>
        <div className={styles.rec_table}>
          <Table
            rowKey="id"
            dataSource={dataSource}
            columns={columns}
            bordered={false}
            size="small"
            rowClassName={(record, index) => {
              let className = styles.dark_row;
              if (index % 2 === 1) className = styles.light_row;
              return className;
            }}
            pagination={{
              showSizeChanger: false,
              defaultCurrent: 1,
              defaultPageSize: 5,
              showTotal: (total) => `共 ${total} 条`,
            }}
          />
        </div>
      </div>
    </Modal>
  );
};

export default MockVideo;
